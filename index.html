<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay-It-Forward Taskboard</title>
    <style>
        /* Add your CSS styles here */
    </style>
</head>
<body>
    <header>
        <h1>Pay-It-Forward Taskboard</h1>
        <p>Help others and earn good karma!</p>
    </header>
    <main>
        <section class="task-form">
            <h2>Can Someone Help Me With?</h2>
            <input type="text" id="task-poster" placeholder="Your Name">
            <input type="text" id="task-title" placeholder="Task Title">
            <textarea id="task-desc" placeholder="Task Description"></textarea>
            <button onclick="addTask()">Post Task</button>
        </section>
        <section class="task-list-container">
            <h2>Tasks</h2>
            <ul id="task-list"></ul>
        </section>
    </main>
    <footer>
        <p>Enjoying this app? Support the creator!</p>
    </footer>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDmc0UDtOFaLrGWbVj2ROugpyyxAZAuBHg",
            authDomain: "pay-it-forward-a1ab8.firebaseapp.com",
            projectId: "pay-it-forward-a1ab8",
            storageBucket: "pay-it-forward-a1ab8.firebasestorage.app",
            messagingSenderId: "788159566096",
            appId: "1:788159566096:web:aa40dcf3d843c98abc1595"
	    measurementId: "G-5NPK7TMQZH"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);

        // Add a task to Firestore
        async function addTask() {
            const posterName = document.getElementById('task-poster').value;
            const title = document.getElementById('task-title').value;
            const desc = document.getElementById('task-desc').value;

            if (posterName && title && desc) {
                await db.collection('tasks').add({
                    posterName,
                    title,
                    desc,
                    timestamp: new Date()
                });
                alert('Task added successfully!');
                loadTasks();
            } else {
                alert('Please fill out all fields before adding a task.');
            }
        }

        // Load tasks from Firestore
        async function loadTasks() {
            const taskList = document.getElementById('task-list');
            taskList.innerHTML = ''; // Clear the list

            const snapshot = await db.collection('tasks').orderBy('timestamp', 'desc').get();
            snapshot.forEach(doc => {
                const task = doc.data();
                const li = document.createElement('li');
                li.innerHTML = `<strong>${task.title}</strong><p>${task.desc}</p><p><em>Posted by: ${task.posterName}</em></p>`;
                taskList.appendChild(li);
            });
        }

        // Load tasks on page load
        window.onload = function () {
            loadTasks();
        };
    </script>
</body>
</html>
